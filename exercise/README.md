# 第1周练习：数据合成与采样方法

本周聚焦于用户画像数据的合成、分层采样与数据流采样等基础数据处理方法。每个练习均配有对应 Python 脚本，便于实践体验。

---

## R1. 用户画像的模拟与生成

- **脚本文件**：`R1_generate_user_profiles.py`
- **目标**：自动生成一批结构合理、分布多样的"用户画像"数据。
- **要点**：
  - 明确用户画像的关键属性（性别、城市、消费水平、年龄、活跃天数等）
  - 支持自定义生成数量
  - 结果可用于后续分析、建模

---

## R2. 简单留出法体验

- **脚本文件**：`R2_split_and_analyze_consumption.py`
- **目标**：体验常规 80/20 随机划分对类别分布的影响。
- **要点**：
  - 统计"消费水平"在全体、训练集、测试集的分布
  - 观察随机划分带来的分布偏差

---

## R3. 分层抽样体验

- **脚本文件**：`R3_stratified_split_consumption.py`
- **目标**：通过分层抽样保证训练集/测试集类别分布与总体一致。
- **要点**：
  - 使用 sklearn 分层划分
  - 对比分层前后的分布差异

---

## R4. 用户数据向量化与可视化

- **脚本文件**：`R4_user_vectorization_and_visualization.py`
- **目标**：将用户画像数据转为高维向量，并用PCA降维后可视化。
- **要点**：
  - 类别特征用 BGE-m3 计算 embedding
  - 所有 embedding 拼接成用户向量
  - 用 PCA 降至二维并绘制散点图

---

## O1. 蓄水池采样算法（选学内容）

- **脚本文件**：`O1_reservoir_sampling_demo.py`
- **目标**：体验如何从大数据流中等概率采样 k 个样本。
- **要点**：
  - 适用于数据量极大、无法全部加载到内存的场景
  - 每次运行采样结果不同，且等概率
  - 可自定义采样数量
